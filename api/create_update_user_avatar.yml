tags:
  - "User"
summary: "Create or update a user's avatar"
description: "Upload a .png file as the user's avatar. Existing avatars will be replaced. JWT is required and must belong to the user."
security:
  - bearerAuth: []
consumes:
  - "multipart/form-data"
produces:
  - "application/json"
parameters:
  - name: "Authorization"
    in: "header"
    description: "JWT token in Bearer format"
    required: true
    type: "string"
  - name: "user_id"
    in: "path"
    description: "ID of the user"
    required: true
    type: "string"
  - name: "file"
    in: "formData"
    description: "Avatar image file (.png)"
    required: true
    type: "file"
responses:
  200:
    description: "Avatar successfully created/updated"
    schema:
      type: object
      properties:
        avatar_url:
          type: string
          example: "http://localhost:8080/users/5644004762845184/avatar"
  400:
    description: "Bad Request: missing 'file' key in request.
                  \n400 status code takes precedence over 401 and 403, i.e.,
                  if the request doesn’t include the key “file” return 400
                  regardless of whether the JWT is missing or valid"
    schema:
      type: object
      properties:
        message:
          type: string
          example: "Missing file in request"
  401:
    description: "Unauthorized: JWT missing or invalid"
    schema:
      type: object
      properties:
        message:
          type: string
          example: "JWT missing or invalid"
  403:
    description: "Forbidden: The JWT is valid but doesn’t belong to the user whose ID is in the path parameter."
    schema:
      type: object
      properties:
        message:
          type: string
          example: "JWT does not belong to the user"
